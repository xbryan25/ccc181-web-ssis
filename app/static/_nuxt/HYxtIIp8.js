import{b1 as P,z as T,b7 as W,v as w,b8 as M,A as B,a_ as D,ax as I,b9 as C,ap as K,T as N,O as V,aK as $,ak as Y,a$ as E,ba as q,e as H,a0 as j,r as z,N as _,j as G,o as X,w as J,D as Q,m as Z,P as ee,bb as te,bc as b,bd as x,be as ne,bf as re,bg as F,bh as L}from"#entry";const oe=P(()=>{const e=w(new Map),t=w(),n=T(()=>{for(const c of e.value.values())if(c)return!0;return!1}),o=M({scrollBody:w(!0)});let u=null;const p=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",C&&u?.(),t.value=void 0};return B(n,(c,d)=>{if(!D)return;if(!c){d&&p();return}t.value===void 0&&(t.value=document.body.style.overflow);const i=window.innerWidth-document.documentElement.clientWidth,l={padding:i,margin:0},s=o.scrollBody?.value?typeof o.scrollBody.value=="object"?I({padding:o.scrollBody.value.padding===!0?i:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?i:o.scrollBody.value.margin},l):l:{padding:0,margin:0};i>0&&(document.body.style.paddingRight=typeof s.padding=="number"?`${s.padding}px`:String(s.padding),document.body.style.marginRight=typeof s.margin=="number"?`${s.margin}px`:String(s.margin),document.documentElement.style.setProperty("--scrollbar-width",`${i}px`),document.body.style.overflow="hidden"),C&&(u=K(document,"touchmove",r=>ae(r),{passive:!1})),N(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function ge(e){const t=Math.random().toString(36).substring(2,7),n=oe();n.value.set(t,e??!1);const o=T({get:()=>n.value.get(t)??!1,set:u=>n.value.set(t,u)});return W(()=>{n.value.delete(t)}),o}function R(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:R(n)}}function ae(e){const t=e||window.event,n=t.target;return n instanceof Element&&R(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function we(e){const t=M({dir:w("ltr")});return T(()=>e?.value||t.dir?.value||"ltr")}var se=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},g=new WeakMap,A=new WeakMap,S={},O=0,U=function(e){return e&&(e.host||U(e.parentNode))},ue=function(e,t){return t.map(function(n){if(e.contains(n))return n;var o=U(n);return o&&e.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ie=function(e,t,n,o){var u=ue(t,Array.isArray(e)?e:[e]);S[n]||(S[n]=new WeakMap);var p=S[n],c=[],d=new Set,i=new Set(u),l=function(r){!r||d.has(r)||(d.add(r),l(r.parentNode))};u.forEach(l);var s=function(r){!r||i.has(r)||Array.prototype.forEach.call(r.children,function(a){if(d.has(a))s(a);else try{var m=a.getAttribute(o),f=m!==null&&m!=="false",v=(g.get(a)||0)+1,h=(p.get(a)||0)+1;g.set(a,v),p.set(a,h),c.push(a),v===1&&f&&A.set(a,!0),h===1&&a.setAttribute(n,"true"),f||a.setAttribute(o,"true")}catch(y){console.error("aria-hidden: cannot operate on ",a,y)}})};return s(t),d.clear(),O++,function(){c.forEach(function(r){var a=g.get(r)-1,m=p.get(r)-1;g.set(r,a),p.set(r,m),a||(A.has(r)||r.removeAttribute(o),A.delete(r)),m||r.removeAttribute(n)}),O--,O||(g=new WeakMap,g=new WeakMap,A=new WeakMap,S={})}},ce=function(e,t,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),u=se(e);return u?(o.push.apply(o,Array.from(u.querySelectorAll("[aria-live], script"))),ie(o,u,n,"aria-hidden")):function(){return null}};function Ee(e){let t;B(()=>$(e),n=>{n?t=ce(n):t&&t()}),V(()=>{t&&t()})}function Ae(e){const t=Y("",1e3);return{search:t,handleTypeaheadSearch:(u,p)=>{t.value=t.value+u;{const c=E(),d=p.map(a=>({...a,textValue:a.value?.textValue??a.ref.textContent?.trim()??""})),i=d.find(a=>a.ref===c),l=d.map(a=>a.textValue),s=de(l,t.value,i?.textValue),r=d.find(a=>a.textValue===s);return r&&r.ref.focus(),r?.ref}},resetTypeahead:()=>{t.value=""}}}function le(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function de(e,t,n){const u=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,p=n?e.indexOf(n):-1;let c=le(e,Math.max(p,0));u.length===1&&(c=c.filter(l=>l!==n));const i=c.find(l=>l.toLowerCase().startsWith(u.toLowerCase()));return i!==n?i:void 0}const fe=q(()=>w([]));function ve(){const e=fe();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=k(e.value,t),e.value.unshift(t)},remove(t){e.value=k(e.value,t),e.value[0]?.resume()}}}function k(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function pe(e){return e.filter(t=>t.tagName!=="A")}var me=H({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,o=t,{currentRef:u,currentElement:p}=j(),c=w(null),d=ve(),i=z({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});_(s=>{if(!D)return;const r=p.value;if(!n.trapped)return;function a(h){if(i.paused||!r)return;const y=h.target;r.contains(y)?c.value=y:b(c.value,{select:!0})}function m(h){if(i.paused||!r)return;const y=h.relatedTarget;y!==null&&(r.contains(y)||b(c.value,{select:!0}))}function f(h){r.contains(c.value)||b(r)}document.addEventListener("focusin",a),document.addEventListener("focusout",m);const v=new MutationObserver(f);r&&v.observe(r,{childList:!0,subtree:!0}),s(()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",m),v.disconnect()})}),_(async s=>{const r=p.value;if(await N(),!r)return;d.add(i);const a=E();if(!r.contains(a)){const f=new CustomEvent(x,L);r.addEventListener(x,v=>o("mountAutoFocus",v)),r.dispatchEvent(f),f.defaultPrevented||(ne(pe(re(r)),{select:!0}),E()===a&&b(r))}s(()=>{r.removeEventListener(x,h=>o("mountAutoFocus",h));const f=new CustomEvent(F,L),v=h=>{o("unmountAutoFocus",h)};r.addEventListener(F,v),r.dispatchEvent(f),setTimeout(()=>{f.defaultPrevented||b(a??document.body,{select:!0}),r.removeEventListener(F,v),d.remove(i)},0)})});function l(s){if(!n.loop&&!n.trapped||i.paused)return;const r=s.key==="Tab"&&!s.altKey&&!s.ctrlKey&&!s.metaKey,a=E();if(r&&a){const m=s.currentTarget,[f,v]=te(m);f&&v?!s.shiftKey&&a===v?(s.preventDefault(),n.loop&&b(f,{select:!0})):s.shiftKey&&a===f&&(s.preventDefault(),n.loop&&b(v,{select:!0})):a===m&&s.preventDefault()}}return(s,r)=>(X(),G(Z(ee),{ref_key:"currentRef",ref:u,tabindex:"-1","as-child":s.asChild,as:s.as,onKeydown:l},{default:J(()=>[Q(s.$slots,"default")]),_:3},8,["as-child","as"]))}}),Se=me;const xe="rovingFocusGroup.onEntryFocus",Fe={bubbles:!1,cancelable:!0},he={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ye(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Oe(e,t,n){const o=ye(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return he[o]}function Te(e,t=!1){const n=E();for(const o of e)if(o===n||(o.focus({preventScroll:t}),E()!==n))return}export{xe as E,Se as F,we as a,ge as b,Ee as c,Fe as d,Te as f,Oe as g,Ae as u};
